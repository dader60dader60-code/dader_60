async function fetchEarthquake() {
        try {
            // 使用中央氣象署開放資料 API (有感地震報告)
            const res = await fetch(`https://opendata.cwa.gov.tw/api/v1/rest/datastore/E-A0015-001?Authorization=${API_KEY}&format=JSON`);
            
            if (!res.ok) throw new Error('連線失敗');
            
            const data = await res.json();
            
            if (data.records && data.records.Earthquake) {
                const allEQ = data.records.Earthquake;
                const targetCounties = ["臺中", "彰化", "南投", "雲林", "台中"];
                const now = new Date().getTime();
                const sevenDaysMs = 7 * 24 * 60 * 60 * 1000;

                // 篩選中部區域地震並限制最多 15 個
                eqDataList = allEQ.filter(e => {
                    const loc = e.EarthquakeInfo.EarthquakeLocation;
                    return targetCounties.some(c => loc.includes(c));
                }).slice(0, 15);

                const selectEl = document.getElementById('eqSelect');
                if(!selectEl) return;
                
                selectEl.innerHTML = "";

                if (eqDataList.length === 0) {
                    selectEl.innerHTML = "<option>近期中部無顯著有感地震</option>";
                    document.getElementById('eqDisplayArea').innerText = "目前無符合條件的中部地震資訊。";
                    return;
                }

                eqDataList.forEach((e, i) => {
                    const eqTime = new Date(e.EarthquakeInfo.OriginTime).getTime();
                    const isNew = (now - eqTime) < sevenDaysMs;
                    let opt = document.createElement('option');
                    opt.value = i;
                    // 這裡會顯示完整的日期時間與秒數
                    opt.innerHTML = (isNew ? "【最新資訊】" : "【歷史記錄】") + e.EarthquakeInfo.OriginTime;
                    selectEl.appendChild(opt);
                });
                displaySelectedEq();
            } else {
                document.getElementById('eqDisplayArea').innerText = "暫無地震資料回傳";
            }
        } catch (e) { 
            console.error(e);
            document.getElementById('eqDisplayArea').innerText = "地震資料載入失敗，請確認網路連線或稍後再試。"; 
        }
    }
